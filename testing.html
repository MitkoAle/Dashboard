<!DOCTYPE html>
<html>
  <head>
    <title>Dashboard</title>
    <link rel="stylesheet" href="https://openlayers.org/en/v4.2.0/css/ol.css" type="text/css">
	<link rel="stylesheet" href="CSS/example.css">
	<link rel="stylesheet" type="text/css" href="CSS/ext-theme-neptune-all.css">
	<!-- The line below is only needed for old environments like Internet Explorer and Android 4.x -->
	<script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,URL"></script>
	<script src="https://openlayers.org/en/v4.2.0/build/ol.js"></script>
	<script type="text/javascript" src="js/extjs/ext-all-debug.js"></script>
	<script type="text/javascript" src="js/extjs/examples.js"></script>
	<script type="text/javascript" src="js/portal/config.js"></script>
	<script type="text/javascript" src="js/portal/ajax.js"></script>
	<script type="text/javascript" src="js/chart.js"></script>

	<style type="text/css">
svg {
    display: block;
	margin: auto;
	background: white;
}

.x-surface{
	display: block !important;
	overflow: visible !important;
	position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%,-50%);
    background: gold;
    padding: 2rem;
}

div.chart {
    position: relative;
    width: 500px;
    height: 500px;
    background: gray;
}


@media only screen and (min-width: 455px) {
    div { 
        -webkit-box-sizing: border-box;
           -moz-box-sizing: border-box;
                box-sizing: border-box;
        min-width: 100%; 
		
    }
}
@media only screen and (min-width: 910px) {
    div { 
        -webkit-box-sizing: border-box;
           -moz-box-sizing: border-box;
                box-sizing: border-box;
        min-width: 49.5%; 
    }
}
@media only screen and (min-width: 1365px) {
    div { 
        -webkit-box-sizing: border-box;
           -moz-box-sizing: border-box;
                box-sizing: border-box;
        min-width: 33%; 
    }
}
@media only screen and (min-width: 1620px) {
    div { 
        -webkit-box-sizing: border-box;
           -moz-box-sizing: border-box;
                box-sizing: border-box;
        min-width: 24.8%; 
    }
}
@media only screen and (min-width: 2025px) {
    div { 
        -webkit-box-sizing: border-box;
           -moz-box-sizing: border-box;
                box-sizing: border-box;
        min-width: 20%; 
    }
}

.map {
	position:relative;
	width: 450px;
    height:440px;
	margin: 0 auto;
}

#container {
  display: inline-block;
  position: relative;
  height:440px;
  width:450px;
}

#legend{
  position: absolute;
  z-index: 10;
  right: 5px;
  top: 5px;
}

#info{
  position: absolute;
  z-index: 10;
  left: 5px;
  bottom: 0px;
}

iframe{
	width:440px;
	height:110px;
}

img{
float:right;
}

.featureInfo{
display: block !important;
}

</style>
<script>
	function initialise()
	{
	$('.featureInfo').remove();
			// LINE CHART, AREA CHART, RADIAL CHART, and SCATTER CHART  have issues. Need to be resolved!
	var configs = new configurationSettings();

	var indicator_uuid = "aabcf97c-c285-43ff-8fb1-b9b44d4bfd77";
	var chart_number = 2;
	var link = configs.portal_indicator_getOutputs + "?indicatoruuid=" + indicator_uuid;
			
	var xmlhttp = new XMLHttpRequest();
	xmlhttp.onreadystatechange=function()
		{
		if (xmlhttp.readyState==4 && xmlhttp.status==200){
			var response = JSON.parse(xmlhttp.response);

							var charts = [{"yfield":["data1","data2","data3"],"stacked":true,"title":"Bua_commercial_sa1","yfieldtitle":["City of Melbourne",
							"City of Moreland","City of Whitehorse"],"xfield":"month","data":[{"data1":180,"month":"","data2":0,"data3":0},
							{"data1":0,"month":"","data2":3,"data3":0},{"data1":0,"month":"","data2":0,"data3":10}],"type":"columnchart","seqnum":4},{"yfield":["data1","data2","data3"],"stacked":true,"title":"FAR_sa1","yfieldtitle":["City of Melbourne",
							"City of Moreland","City of Whitehorse"],"xfield":"month","data":[{"data1":0.14,"month":"","data2":0,"data3":0},
							{"data1":0,"month":"","data2":0.19,"data3":0},{"data1":0,"month":"","data2":0,"data3":0.21}],"type":"columnchart","seqnum":4},{"yfield":["data1","data2","data3"],"stacked":true,"title":"PGA_sa1","yfieldtitle":["City of Melbourne",
							"City of Moreland","City of Whitehorse"],"xfield":"month","data":[{"data1":210,"month":"","data2":0,"data3":0},
							{"data1":0,"month":"","data2":80,"data3":0},{"data1":0,"month":"","data2":0,"data3":140}],"type":"columnchart","seqnum":4}];
					
					for (var i = 0; i < charts.length; i++) 
					{			
						if (charts[i] != null){
							var obj = chart(charts, i);	
						}
					}

			}
		}
	xmlhttp.open("GET",link,true);
	xmlhttp.send(null);
	
	}
	</script>
  </head>
<script type="text/javascript">
	initialise();
</script>
  <body>
  <div id="container">
    <div id="map1" class="map"><div id="legend"><img src="http://144.6.224.184:8080/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=uadi-ws-uom:whitehorse_bua_commercial_sa1"></img></div>
    <div id="info" style="width:440px">&nbsp;</div>
  </div>
	</div>
  <div id="container">
	<div id="map2" class="map"><div id="legend"><img src="http://144.6.224.184:8080/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=uadi-ws-uom:whitehorse_far_sa1"></img></div></div>
	  </div>
  <div id="container">
	<div id="map3" class="map"><div id="legend"><img src="http://144.6.224.184:8080/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=uadi-ws-uom:melbourne_pga_sa1"></img></div></div>
	  </div>
  <div id="container">
	<div id="chart0"></div>
  </div>
  <div id="container">
	<div id="map4" class="map"><div id="legend"><img src="http://144.6.224.184:8080/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=uadi-ws-uom:whitehorse_bua_commercial_sa1"></img></div></div>
	  </div>
  <div id="container">
	<div id="map5" class="map"><div id="legend"><img src="http://144.6.224.184:8080/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=uadi-ws-uom:whitehorse_far_sa1"></img></div></div>
	</div>
  <div id="container">
	<div id="map6" class="map"><div id="legend"><img src="http://144.6.224.184:8080/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=uadi-ws-uom:melbourne_pga_sa1"></img></div></div>
  </div>
  <div id="container">
	<div id="chart1"></div>
  </div>
  <div id="container">
	<div id="map7" class="map"><div id="legend"><img src="http://144.6.224.184:8080/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=uadi-ws-uom:whitehorse_bua_commercial_sa1"></img></div></div>
  </div>
  <div id="container">
	<div id="map8" class="map"><div id="legend"><img src="http://144.6.224.184:8080/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=uadi-ws-uom:whitehorse_far_sa1"></img></div></div>
  </div>
  <div id="container">
	<div id="map9" class="map"><div id="legend"><img src="http://144.6.224.184:8080/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=uadi-ws-uom:melbourne_pga_sa1"></img></div></div>
  </div>
  <div id="container">
	<div id="chart2"></div>
  </div>
    <script>
      var wmsSource = new ol.source.TileWMS({
        url: 'http://144.6.224.184:8080/geoserver/uadi-ws-uom/wms',
        params: {'LAYERS': 'uadi-ws-uom:melbourne_bua_commercial_sa1', 'TILED': true},
        serverType: 'geoserver'
      });
	  var layer1 = [
        new ol.layer.Tile({
          source: new ol.source.OSM()
        }),
        new ol.layer.Tile({
			source: wmsSource
        })
      ];
	  var view = new ol.View({
          center: [16135548, -4553599],
          zoom: 12
      });
      var map1 = new ol.Map({
        layers: layer1,
        target: 'map1',
        view: view
      });
	  
	  map1.on('singleclick', function(evt) {
        document.getElementById('info').innerHTML = '';
        var viewResolution = /** @type {number} */ (view.getResolution());
        var url = wmsSource.getGetFeatureInfoUrl(
            evt.coordinate, viewResolution, 'EPSG:3857',
            {'INFO_FORMAT': 'text/html'});
        if (url) {
          document.getElementById('info').innerHTML = '<iframe seamless src="' + url + '"></iframe>';
        }
      });

      map1.on('pointermove', function(evt) {
        if (evt.dragging) {
          return;
        }
        var pixel = map1.getEventPixel(evt.originalEvent);
        var hit = map1.forEachLayerAtPixel(pixel, function() {
          return true;
        });
        map1.getTargetElement().style.cursor = hit ? 'pointer' : '';
      });

	  
	  
	  
	  
	    var layer2 = [
        new ol.layer.Tile({
          source: new ol.source.OSM()
        }),
        new ol.layer.Tile({
          source: new ol.source.TileWMS({
            url: 'http://144.6.224.184:8080/geoserver/uadi-ws-uom/wms',
            params: {'LAYERS': 'uadi-ws-uom:melbourne_far_sa1', 'TILED': true},
            serverType: 'geoserver'
          })
        })
      ];
      var map2 = new ol.Map({
        layers: layer2,
        target: 'map2',
        view: new ol.View({
          center: [16135548, -4553599],
          zoom: 12
        })
      });
	      var layer3 = [
        new ol.layer.Tile({
          source: new ol.source.OSM()
        }),
        new ol.layer.Tile({
          source: new ol.source.TileWMS({
            url: 'http://144.6.224.184:8080/geoserver/uadi-ws-uom/wms',
            params: {'LAYERS': 'uadi-ws-uom:melbourne_pga_sa1', 'TILED': true},
            serverType: 'geoserver'
          })
        })
      ];
      var map3 = new ol.Map({
        layers: layer3,
        target: 'map3',
        view: new ol.View({
          center: [16135548, -4553599],
          zoom: 12
        })
      });
	  	  	var layer4 = [
        new ol.layer.Tile({
          source: new ol.source.OSM()
        }),
        new ol.layer.Tile({
          source: new ol.source.TileWMS({
            url: 'http://144.6.224.184:8080/geoserver/uadi-ws-uom/wms',
            params: {'LAYERS': 'uadi-ws-uom:moreland_bua_commercial_sa1', 'TILED': true},
            serverType: 'geoserver'
          })
        })
      ];
      var map4 = new ol.Map({
        layers: layer4,
        target: 'map4',
        view: new ol.View({
          center: [16135548, -4541299],
          zoom: 12
        })
      });
	  	  	var layer5 = [
        new ol.layer.Tile({
          source: new ol.source.OSM()
        }),
        new ol.layer.Tile({
          source: new ol.source.TileWMS({
            url: 'http://144.6.224.184:8080/geoserver/uadi-ws-uom/wms',
            params: {'LAYERS': 'uadi-ws-uom:moreland_far_sa1', 'TILED': true},
            serverType: 'geoserver'
          })
        })
      ];
      var map5 = new ol.Map({
        layers: layer5,
        target: 'map5',
        view: new ol.View({
          center: [16135548, -4541299],
          zoom: 12
        })
      });
	  	var layer6 = [
        new ol.layer.Tile({
          source: new ol.source.OSM()
        }),
        new ol.layer.Tile({
          source: new ol.source.TileWMS({
            url: 'http://144.6.224.184:8080/geoserver/uadi-ws-uom/wms',
            params: {'LAYERS': 'uadi-ws-uom:moreland_pga_sa1', 'TILED': true},
            serverType: 'geoserver'
          })
        })
      ];
      var map6 = new ol.Map({
        layers: layer6,
        target: 'map6',
        view: new ol.View({
          center: [16135548, -4541299],
          zoom: 12
        })
      });
	  	var layer7 = [
        new ol.layer.Tile({
          source: new ol.source.OSM()
        }),
        new ol.layer.Tile({
          source: new ol.source.TileWMS({
            url: 'http://144.6.224.184:8080/geoserver/uadi-ws-uom/wms',
            params: {'LAYERS': 'uadi-ws-uom:whitehorse_bua_commercial_sa1', 'TILED': true},
            serverType: 'geoserver'
          })
        })
      ];
      var map7 = new ol.Map({
        layers: layer7,
        target: 'map7',
        view: new ol.View({
          center: [16159548, -4555500],
          zoom: 12
        })
      });
	  	  	var layer8 = [
        new ol.layer.Tile({
          source: new ol.source.OSM()
        }),
        new ol.layer.Tile({
          source: new ol.source.TileWMS({
            url: 'http://144.6.224.184:8080/geoserver/uadi-ws-uom/wms',
            params: {'LAYERS': 'uadi-ws-uom:whitehorse_far_sa1', 'TILED': true},
            serverType: 'geoserver'
          })
        })
      ];
      var map8 = new ol.Map({
        layers: layer8,
        target: 'map8',
        view: new ol.View({
          center: [16159548, -4555500],
          zoom: 12
        })
      });
	  	var layer9 = [
        new ol.layer.Tile({
          source: new ol.source.OSM()
        }),
        new ol.layer.Tile({
          source: new ol.source.TileWMS({
            url: 'http://144.6.224.184:8080/geoserver/uadi-ws-uom/wms',
            params: {'LAYERS': 'uadi-ws-uom:whitehorse_pga_sa1', 'TILED': true},
            serverType: 'geoserver'
          })
        })
      ];
      var map9 = new ol.Map({
        layers: layer9,
        target: 'map9',
        view: new ol.View({
          center: [16159548, -4555500],
          zoom: 12
        })
      });

    </script>
  </body>
</html>